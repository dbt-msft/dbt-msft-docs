<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">Overview | dbt-sqlserver-docs</title><meta data-react-helmet="true" property="og:url" content="https://dbt-msft.github.io//dbt-msft-docs/docs/dbt-sqlserver/overview"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Overview | dbt-sqlserver-docs"><meta data-react-helmet="true" name="description" content="dbt adapter for sql server."><meta data-react-helmet="true" property="og:description" content="dbt adapter for sql server."><link data-react-helmet="true" rel="shortcut icon" href="/dbt-msft-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://dbt-msft.github.io//dbt-msft-docs/docs/dbt-sqlserver/overview"><link data-react-helmet="true" rel="alternate" href="https://dbt-msft.github.io//dbt-msft-docs/docs/dbt-sqlserver/overview" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dbt-msft.github.io//dbt-msft-docs/docs/dbt-sqlserver/overview" hreflang="x-default"><link rel="stylesheet" href="/dbt-msft-docs/assets/css/styles.6a51eaf8.css">
<link rel="preload" href="/dbt-msft-docs/assets/js/runtime~main.f5d6f5ef.js" as="script">
<link rel="preload" href="/dbt-msft-docs/assets/js/main.51c2c29b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dbt-msft-docs/"><img src="/dbt-msft-docs/img/dbt-msft-logo.png" alt="dbt Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/dbt-msft-docs/img/dbt-msft-logo.png" alt="dbt Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">dbt-msft-docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active navbar__link--active" href="/dbt-msft-docs/docs/dbt-sqlserver/overview">dbt-sqlserver</a><a class="navbar__item navbar__link navbar__link--active" href="/dbt-msft-docs/docs/dbt-synapse/overview">dbt-synapse</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/dbt-msft" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/dbt-msft-docs/docs/better_together_pitch">dbt and MSFT - Better Together</a></li><li class="menu__list-item"><a class="menu__link" href="/dbt-msft-docs/docs/training">dbt Training Crash Course</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">dbt-sqlserver</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/dbt-msft-docs/docs/dbt-sqlserver/overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started Guides</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">dbt-synapse</a></li><li class="menu__list-item"><a class="menu__link" href="/dbt-msft-docs/docs/ado_pipelines_example">Azure DevOps Pipelines Example</a></li><li class="menu__list-item"><a class="menu__link" href="/dbt-msft-docs/docs/nested_CTES">Nested CTES in TSQL, a treatise</a></li><li class="menu__list-item"><a class="menu__link" href="/dbt-msft-docs/docs/contributing">Contributing to dbt-msft-docs</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">dbt-sqlserver</h1></header><p><a href="https://www.getdbt.com" target="_blank" rel="noopener noreferrer">dbt</a> adapter for sql server.</p><p>Passing all tests in <a href="https://github.com/fishtown-analytics/dbt-integration-tests/" target="_blank" rel="noopener noreferrer">dbt-integration-tests</a>. </p><p>Only supports dbt 0.14 and newer!</p><ul><li>For dbt 0.18.x use dbt-sqlserver 0.18.x</li><li>dbt 0.17.x is unsupported</li><li>dbt 0.16.x is unsupported</li><li>For dbt 0.15.x use dbt-sqlserver 0.15.x</li><li>For dbt 0.14.x use dbt-sqlserver 0.14.x</li></ul><p>Easiest install is to use pip:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pip install dbt-sqlserver</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>On Ubuntu make sure you have the ODBC header files before installing</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install unixodbc-dev</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="authentication"></a>Authentication<a class="hash-link" href="#authentication" title="Direct link to heading">#</a></h2><p>The following is needed for every target definition for both SQL Server and Azure SQL.  The sections below details how to connect to SQL Server and Azure SQL specifically.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type: sqlserver</span></span><span class="token-line" style="color:#393A34"><span class="token plain">driver: &#x27;ODBC Driver 17 for SQL Server&#x27; (The ODBC Driver installed on your system)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">server: server-host-name or ip</span></span><span class="token-line" style="color:#393A34"><span class="token plain">port: 1433</span></span><span class="token-line" style="color:#393A34"><span class="token plain">schema: schemaname</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="security"></a>Security<a class="hash-link" href="#security" title="Direct link to heading">#</a></h3><p>Encryption is not enabled by default, unless you specify it.</p><p>To enable encryption, add the following to your target definition. This is the default encryption strategy recommended by MSFT. For more information see <a href="https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/connection-string-syntax#using-trustservercertificate?WT.mc_id=DP-MVP-5003930" target="_blank" rel="noopener noreferrer">this docs page</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">encrypt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># adds &quot;Encrypt=Yes&quot; to connection string</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">trust_cert</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For a fully-secure, encrypted connection, you must enable <code>trust_cert: false</code> because <code>&quot;TrustServerCertificate=Yes&quot;</code> is default for <code>dbt-sqlserver</code> in order to not break already defined targets. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="standard-sql-server-authentication"></a>standard SQL Server authentication<a class="hash-link" href="#standard-sql-server-authentication" title="Direct link to heading">#</a></h3><p>SQL Server credentials are supported for on-prem as well as cloud, and it is the default authentication method for <code>dbt-sqlsever</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">user: username</span></span><span class="token-line" style="color:#393A34"><span class="token plain">password: password</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="windows-authentication-sql-server-specific"></a>Windows Authentication (SQL Server-specific)<a class="hash-link" href="#windows-authentication-sql-server-specific" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">windows_login: True</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>alternatively</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">trusted_connection: True</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="azure-sql-specific-auth"></a>Azure SQL-specific auth<a class="hash-link" href="#azure-sql-specific-auth" title="Direct link to heading">#</a></h3><p>The following <a href="https://docs.microsoft.com/en-us/sql/connect/odbc/using-azure-active-directory?view=sql-server-ver15#new-andor-modified-dsn-and-connection-string-keywords" target="_blank" rel="noopener noreferrer"><code>pyodbc</code>-supported ActiveDirectory methods</a> are available to authenticate to Azure SQL:</p><ul><li>Azure CLI</li><li>ActiveDirectory Password</li><li>ActiveDirectory Interactive</li><li>ActiveDirectory Integrated</li><li>Service Principal (a.k.a. AAD Application)</li><li><del>ActiveDirectory MSI</del> (not implemented)</li></ul><p>However, the Azure CLI is the ideal way to authenticate instead of using the built-in ODBC ActiveDirectory methods, for reasons detailed below.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="azure-cli"></a>Azure CLI<a class="hash-link" href="#azure-cli" title="Direct link to heading">#</a></h4><p>Use the authentication of the Azure command line interface (CLI). First, <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli" target="_blank" rel="noopener noreferrer">install the Azure CLI</a>, then, log in:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">az login</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then, set <code>authentication</code> in <code>profiles.yml</code> to <code>CLI</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">authentication: CLI</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This is also the preferred route for using a service principal:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">az login --service-principal --username $CLIENTID --password $SECRET --tenant $TENANTID</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This avoids storing a secret as plain text in <code>profiles.yml</code>.</p><p>Source: <a href="https://docs.microsoft.com/en-us/cli/azure/create-an-azure-service-principal-azure-cli#sign-in-using-a-service-principal" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/en-us/cli/azure/create-an-azure-service-principal-azure-cli#sign-in-using-a-service-principal</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="activedirectory-password"></a>ActiveDirectory Password<a class="hash-link" href="#activedirectory-password" title="Direct link to heading">#</a></h4><p>Definitely not ideal, but available</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">authentication: ActiveDirectoryPassword</span></span><span class="token-line" style="color:#393A34"><span class="token plain">user: bill.gates@microsoft.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain">password: i&lt;3opensource?</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="activedirectory-interactive-windows-only"></a>ActiveDirectory Interactive (<em>Windows only</em>)<a class="hash-link" href="#activedirectory-interactive-windows-only" title="Direct link to heading">#</a></h4><p>brings up the Azure AD prompt so you can MFA if need be. The downside to this approach is that you must log in each time you run a dbt command!</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">authentication: ActiveDirectoryInteractive</span></span><span class="token-line" style="color:#393A34"><span class="token plain">user: bill.gates@microsoft.com</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="activedirectory-integrated-windows-only"></a>ActiveDirectory Integrated (<em>Windows only</em>)<a class="hash-link" href="#activedirectory-integrated-windows-only" title="Direct link to heading">#</a></h4><p>uses your machine&#x27;s credentials (might be disabled by your AAD admins), also requires that you have Active Directory Federation Services (ADFS) installed and running, which is only the case if you have an on-prem Active Directory linked to your Azure AD... </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">authentication: ActiveDirectoryIntegrated</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="service-principal"></a>Service Principal<a class="hash-link" href="#service-principal" title="Direct link to heading">#</a></h5><p><code>client_*</code> and <code>app_*</code> can be used interchangeably. Again, it is not recommended to store a service principal secret in plain text in your <code>dbt_profile.yml</code>. The CLI auth method is preferred.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">authentication: ServicePrincipal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">tenant_id: tenatid</span></span><span class="token-line" style="color:#393A34"><span class="token plain">client_id: clientid</span></span><span class="token-line" style="color:#393A34"><span class="token plain">client_secret: clientsecret</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="supported-features"></a>Supported features<a class="hash-link" href="#supported-features" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="materializations"></a>Materializations<a class="hash-link" href="#materializations" title="Direct link to heading">#</a></h3><ul><li>Table: <div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">- Will be materialized as columns store index by default (requires SQL Server 2017 as least). </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  (For Azure SQL requires Service Tier greater than S2)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">To override:</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div>{{
config(
as_columnstore = false,
)
}}</li><li>View</li><li>Incremental</li><li>Ephemeral</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="seeds"></a>Seeds<a class="hash-link" href="#seeds" title="Direct link to heading">#</a></h3><p>By default, dbt-sqlserver will attempt to insert seed files in batches of 400 rows. If this exceeds SQL Server&#x27;s 2100 parameter limit, the adapter will automatically limit to the highest safe value possible.</p><p>To set a different default seed value, you can set the variable <code>max_batch_size</code> in your project configuration.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">vars</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">max_batch_size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Any integer less than  or equal to 2100 will do.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hooks"></a>Hooks<a class="hash-link" href="#hooks" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="custom-schemas"></a>Custom schemas<a class="hash-link" href="#custom-schemas" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sources"></a>Sources<a class="hash-link" href="#sources" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="testing--documentation"></a>Testing &amp; documentation<a class="hash-link" href="#testing--documentation" title="Direct link to heading">#</a></h3><ul><li>Schema test supported</li><li>Data tests supported from dbt 0.14.1</li><li>Docs</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="snapshots"></a>Snapshots<a class="hash-link" href="#snapshots" title="Direct link to heading">#</a></h3><ul><li>Timestamp</li><li>Check</li></ul><p>But, columns in source table can not have any constraints. If for example any column has a NOT NULL constraint, an error will be thrown.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dbt-utils"></a>DBT Utils<a class="hash-link" href="#dbt-utils" title="Direct link to heading">#</a></h3><p>Many DBT utils macros are supported, but they require the addition of the <code>tsql_utils</code> dbt package. </p><p>You can find the package and installation instructions in the <a href="https://github.com/dbt-msft/tsql-utils" target="_blank" rel="noopener noreferrer">tsql-utils repo</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="indexes"></a>Indexes<a class="hash-link" href="#indexes" title="Direct link to heading">#</a></h3><p>There is now possible to define a regular sql server index on a table.
This is best used when the default clustered columnstore index materialisation is not suitable.
One reason would be that you need a large table that usually is queried one row at a time.</p><p>Clusterad and non-clustered index are supported:</p><ul><li>create_clustered_index(columns, unique=False)</li><li>create_nonclustered_index(columns, includes=False)</li><li>drop_all_indexes_on_table(): Drops current indexex on a table. Only meaningfull if model is incremental.</li></ul><p>Example of applying Unique clustered index on two columns, Ordinary index on one column, Ordinary index on one column with another column included</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    config({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;as_columnstore&quot;: false, </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;materialized&quot;: &#x27;table&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;post-hook&quot;: [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;{{ create_clustered_index(columns = [&#x27;row_id&#x27;, &#x27;row_id_complement&#x27;], unique=True) }}&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;{{ create_nonclustered_index(columns = [&#x27;modified_date&#x27;]) }}&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;{{ create_nonclustered_index(columns = [&#x27;row_id&#x27;], includes = [&#x27;modified_date&#x27;]) }}&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="changelog"></a>Changelog<a class="hash-link" href="#changelog" title="Direct link to heading">#</a></h2><p>See <a href="https://github.com/dbt-msft/dbt-sqlserver/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">the changelog</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/dbt-msft/dbt-msft-docs/tree/documentation/docs/dbt-sqlserver/overview.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dbt-msft-docs/docs/training"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« dbt Training Crash Course</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dbt-msft-docs/docs/guides/vscode_setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using VSCode with dbt Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#authentication" class="table-of-contents__link">Authentication</a><ul><li><a href="#security" class="table-of-contents__link">Security</a></li><li><a href="#standard-sql-server-authentication" class="table-of-contents__link">standard SQL Server authentication</a></li><li><a href="#windows-authentication-sql-server-specific" class="table-of-contents__link">Windows Authentication (SQL Server-specific)</a></li><li><a href="#azure-sql-specific-auth" class="table-of-contents__link">Azure SQL-specific auth</a></li></ul></li><li><a href="#supported-features" class="table-of-contents__link">Supported features</a><ul><li><a href="#materializations" class="table-of-contents__link">Materializations</a></li><li><a href="#seeds" class="table-of-contents__link">Seeds</a></li><li><a href="#hooks" class="table-of-contents__link">Hooks</a></li><li><a href="#custom-schemas" class="table-of-contents__link">Custom schemas</a></li><li><a href="#sources" class="table-of-contents__link">Sources</a></li><li><a href="#testing--documentation" class="table-of-contents__link">Testing &amp; documentation</a></li><li><a href="#snapshots" class="table-of-contents__link">Snapshots</a></li><li><a href="#dbt-utils" class="table-of-contents__link">DBT Utils</a></li><li><a href="#indexes" class="table-of-contents__link">Indexes</a></li></ul></li><li><a href="#changelog" class="table-of-contents__link">Changelog</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/dbt-msft-docs/docs/dbt-sqlserver/overview">dbt-sqlserver</a></li><li class="footer__item"><a class="footer__link-item" href="/dbt-msft-docs/docs/dbt-synapse/overview">dbt-synapse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://docs.getdbt.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>dbt<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/dbt-msft/dbt-sqlserver" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>dbt-sqlserver GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/dbt-msft/dbt-synapse" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>dbt-synapse GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 dbt-msft. Built with Docusaurus.</div></div></div></footer></div>
<script src="/dbt-msft-docs/assets/js/runtime~main.f5d6f5ef.js"></script>
<script src="/dbt-msft-docs/assets/js/main.51c2c29b.js"></script>
</body>
</html>